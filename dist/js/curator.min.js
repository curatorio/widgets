!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):e(t)}(window,function(t){var e=function(){function e(t){return null==t?String(t):Z[G.call(t)]||"object"}function i(t){return"function"==e(t)}function n(t){return null!=t&&t==t.window}function o(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function s(t){return"object"==e(t)}function r(t){return s(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){var e=!!t&&"length"in t&&t.length,i=b.type(t);return"function"!=i&&!n(t)&&("array"==i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function u(t){return k.call(t,function(t){return null!=t})}function c(t){return t.length>0?b.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function h(t){return t in N?N[t]:N[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function p(t,e){return"number"!=typeof e||I[l(t)]?e:e+"px"}function d(t){var e,i;return T[t]||(e=S.createElement(t),S.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),T[t]=i),T[t]}function f(t){return"children"in t?L.call(t.children):b.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function g(t,e){var i,n=t?t.length:0;for(i=0;i<n;i++)this[i]=t[i];this.length=n,this.selector=e||""}function m(t,e,i){for(D in e)i&&(r(e[D])||J(e[D]))?(r(e[D])&&!r(t[D])&&(t[D]={}),J(e[D])&&!J(t[D])&&(t[D]=[]),m(t[D],e[D],i)):e[D]!==F&&(t[D]=e[D])}function v(t,e){return null==e?b(t):b(t).filter(e)}function A(t,e,n,o){return i(e)?e.call(t,n,o):e}function y(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function C(t,e){var i=t.className||"",n=i&&i.baseVal!==F;if(e===F)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}function w(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?b.parseJSON(t):t):t}catch(e){return t}}function E(t,e){e(t);for(var i=0,n=t.childNodes.length;i<n;i++)E(t.childNodes[i],e)}var F,D,b,B,P,_,$=[],x=$.concat,k=$.filter,L=$.slice,S=t.document,T={},N={},I={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},O=/^\s*<(\w+|!)[^>]*>/,M=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,H=/^(?:body|html)$/i,j=["val","css","html","text","data","width","height","offset"],R=["after","prepend","before","append"],U=S.createElement("table"),W=S.createElement("tr"),z={tr:S.createElement("tbody"),tbody:U,thead:U,tfoot:U,td:W,th:W,"*":S.createElement("div")},V=/^[\w-]*$/,Z={},G=Z.toString,q={},X=S.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},J=Array.isArray||function(t){return t instanceof Array};return q.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,o=t.parentNode,s=!o;return s&&(o=X).appendChild(t),n=~q.qsa(o,e).indexOf(t),s&&X.removeChild(t),n},P=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},_=function(t){return k.call(t,function(e,i){return t.indexOf(e)==i})},q.fragment=function(t,e,i){var n,o,s;return M.test(t)&&(n=b(S.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")),e===F&&(e=O.test(t)&&RegExp.$1),e in z||(e="*"),s=z[e],s.innerHTML=""+t,n=b.each(L.call(s.childNodes),function(){s.removeChild(this)})),r(i)&&(o=b(n),b.each(i,function(t,e){j.indexOf(t)>-1?o[t](e):o.attr(t,e)})),n},q.Z=function(t,e){return new g(t,e)},q.isZ=function(t){return t instanceof q.Z},q.init=function(t,e){var n;if(!t)return q.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&O.test(t))n=q.fragment(t,RegExp.$1,e),t=null;else{if(e!==F)return b(e).find(t);n=q.qsa(S,t)}else{if(i(t))return b(S).ready(t);if(q.isZ(t))return t;if(J(t))n=u(t);else if(s(t))n=[t],t=null;else if(O.test(t))n=q.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==F)return b(e).find(t);n=q.qsa(S,t)}}return q.Z(n,t)},b=function(t,e){return q.init(t,e)},b.extend=function(t){var e,i=L.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){m(t,i,e)}),t},q.qsa=function(t,e){var i,n="#"==e[0],o=!n&&"."==e[0],s=n||o?e.slice(1):e,r=V.test(s);return t.getElementById&&r&&n?(i=t.getElementById(s))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:L.call(r&&!n&&t.getElementsByClassName?o?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},b.contains=S.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},b.type=e,b.isFunction=i,b.isWindow=n,b.isArray=J,b.isPlainObject=r,b.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},b.isNumeric=function(t){var e=Number(t),i=typeof t;return null!=t&&"boolean"!=i&&("string"!=i||t.length)&&!isNaN(e)&&isFinite(e)||!1},b.inArray=function(t,e,i){return $.indexOf.call(e,t,i)},b.camelCase=P,b.trim=function(t){return null==t?"":String.prototype.trim.call(t)},b.uuid=0,b.support={},b.expr={},b.noop=function(){},b.map=function(t,e){var i,n,o,s=[];if(a(t))for(n=0;n<t.length;n++)null!=(i=e(t[n],n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o))&&s.push(i);return c(s)},b.each=function(t,e){var i,n;if(a(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},b.grep=function(t,e){return k.call(t,e)},t.JSON&&(b.parseJSON=JSON.parse),b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()}),b.fn={constructor:q.Z,length:0,forEach:$.forEach,reduce:$.reduce,push:$.push,sort:$.sort,splice:$.splice,indexOf:$.indexOf,concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)e=arguments[t],i[t]=q.isZ(e)?e.toArray():e;return x.apply(q.isZ(this)?this.toArray():this,i)},map:function(t){return b(b.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return b(L.apply(this,arguments))},ready:function(e){if("complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll)setTimeout(function(){e(b)},0);else{var i=function(){S.removeEventListener("DOMContentLoaded",i,!1),t.removeEventListener("load",i,!1),e(b)};S.addEventListener("DOMContentLoaded",i,!1),t.addEventListener("load",i,!1)}return this},get:function(t){return t===F?L.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return $.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return i(t)?this.not(this.not(t)):b(k.call(this,function(e){return q.matches(e,t)}))},add:function(t,e){return b(_(this.concat(b(t,e))))},is:function(t){return"string"==typeof t?this.length>0&&q.matches(this[0],t):t&&this.selector==t.selector},not:function(t){var e=[];if(i(t)&&t.call!==F)this.each(function(i){t.call(this,i)||e.push(this)});else{var n="string"==typeof t?this.filter(t):a(t)&&i(t.item)?L.call(t):b(t);this.forEach(function(t){n.indexOf(t)<0&&e.push(t)})}return b(e)},has:function(t){return this.filter(function(){return s(t)?b.contains(this,t):b(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!s(t)?t:b(t)},last:function(){var t=this[this.length-1];return t&&!s(t)?t:b(t)},find:function(t){var e=this;return t?"object"==typeof t?b(t).filter(function(){var t=this;return $.some.call(e,function(e){return b.contains(e,t)})}):1==this.length?b(q.qsa(this[0],t)):this.map(function(){return q.qsa(this,t)}):b()},closest:function(t,e){var i=[],n="object"==typeof t&&b(t);return this.each(function(s,r){for(;r&&!(n?n.indexOf(r)>=0:q.matches(r,t));)r=r!==e&&!o(r)&&r.parentNode;r&&i.indexOf(r)<0&&i.push(r)}),b(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=b.map(i,function(t){if((t=t.parentNode)&&!o(t)&&e.indexOf(t)<0)return e.push(t),t});return v(e,t)},parent:function(t){return v(_(this.pluck("parentNode")),t)},children:function(t){return v(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||L.call(this.childNodes)})},siblings:function(t){return v(this.map(function(t,e){return k.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return b.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=i(t);if(this[0]&&!e)var n=b(t).get(0),o=n.parentNode||this.length>1;return this.each(function(i){b(this).wrapAll(e?t.call(this,i):o?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){b(this[0]).before(t=b(t));for(var e;(e=t.children()).length;)t=e.first();b(t).append(this)}return this},wrapInner:function(t){var e=i(t);return this.each(function(i){var n=b(this),o=n.contents(),s=e?t.call(this,i):t;o.length?o.wrapAll(s):n.append(s)})},unwrap:function(){return this.parent().each(function(){b(this).replaceWith(b(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=b(this);(t===F?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return b(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return b(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;b(this).empty().append(A(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var i=A(this,t,e,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,e){var i;return"string"!=typeof t||1 in arguments?this.each(function(i){if(1===this.nodeType)if(s(t))for(D in t)y(this,D,t[D]);else y(this,t,A(this,e,i,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(t))?i:F},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){y(this,t)},this)})},prop:function(t,e){return t=Y[t]||t,"string"!=typeof t||1 in arguments?this.each(function(i){if(s(t))for(D in t)this[Y[D]||D]=t[D];else this[t]=A(this,e,i,this[t])}):this[0]&&this[0][t]},removeProp:function(t){return t=Y[t]||t,this.each(function(){delete this[t]})},data:function(t,e){var i="data-"+t.replace(/([A-Z])/g,"-$1").toLowerCase(),n=1 in arguments?this.attr(i,e):this.attr(i);return null!==n?w(n):F},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=A(this,t,e,this.value)})):this[0]&&(this[0].multiple?b(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var i=b(this),n=A(this,e,t,i.offset()),o=i.offsetParent().offset(),s={top:n.top-o.top,left:n.left-o.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)});if(!this.length)return null;if(S.documentElement!==this[0]&&!b.contains(S.documentElement,this[0]))return{top:0,left:0};var i=this[0].getBoundingClientRect();return{left:i.left+t.pageXOffset,top:i.top+t.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(t,i){if(arguments.length<2){var n=this[0];if("string"==typeof t){if(!n)return;return n.style[P(t)]||getComputedStyle(n,"").getPropertyValue(t)}if(J(t)){if(!n)return;var o={},s=getComputedStyle(n,"");return b.each(t,function(t,e){o[e]=n.style[P(e)]||s.getPropertyValue(e)}),o}}var r="";if("string"==e(t))i||0===i?r=l(t)+":"+p(t,i):this.each(function(){this.style.removeProperty(l(t))});else for(D in t)t[D]||0===t[D]?r+=l(D)+":"+p(D,t[D])+";":this.each(function(){this.style.removeProperty(l(D))});return this.each(function(){this.style.cssText+=";"+r})},index:function(t){return t?this.indexOf(b(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&$.some.call(this,function(t){return this.test(C(t))},h(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){B=[];var i=C(this);A(this,t,e,i).split(/\s+/g).forEach(function(t){b(this).hasClass(t)||B.push(t)},this),B.length&&C(this,i+(i?" ":"")+B.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===F)return C(this,"");B=C(this),A(this,t,e,B).split(/\s+/g).forEach(function(t){B=B.replace(h(t)," ")}),C(this,B.trim())}})},toggleClass:function(t,e){return t?this.each(function(i){var n=b(this);A(this,t,i,C(this)).split(/\s+/g).forEach(function(t){(e===F?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===F?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===F?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=H.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(b(t).css("margin-top"))||0,i.left-=parseFloat(b(t).css("margin-left"))||0,n.top+=parseFloat(b(e[0]).css("border-top-width"))||0,n.left+=parseFloat(b(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||S.body;t&&!H.test(t.nodeName)&&"static"==b(t).css("position");)t=t.offsetParent;return t})}},b.fn.detach=b.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});b.fn[t]=function(i){var s,r=this[0];return i===F?n(r)?r["inner"+e]:o(r)?r.documentElement["scroll"+e]:(s=this.offset())&&s[t]:this.each(function(e){r=b(this),r.css(t,A(this,i,e,r[t]()))})}}),R.forEach(function(i,n){var o=n%2;b.fn[i]=function(){var i,s,r=b.map(arguments,function(t){var n=[];return i=e(t),"array"==i?(t.forEach(function(t){return t.nodeType!==F?n.push(t):b.zepto.isZ(t)?n=n.concat(t.get()):void(n=n.concat(q.fragment(t)))}),n):"object"==i||null==t?t:q.fragment(t)}),a=this.length>1;return r.length<1?this:this.each(function(e,i){s=o?i:i.parentNode,i=0==n?i.nextSibling:1==n?i.firstChild:2==n?i:null;var u=b.contains(S.documentElement,s);r.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!s)return b(e).remove();s.insertBefore(e,i),u&&E(e,function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var i=e.ownerDocument?e.ownerDocument.defaultView:t;i.eval.call(i,e.innerHTML)}})})})},b.fn[o?i+"To":"insert"+(n?"Before":"After")]=function(t){return b(t)[i](this),this}}),q.Z.prototype=g.prototype=b.fn,q.uniq=_,q.deserializeValue=w,b.zepto=q,b}();return t.Zepto=e,t.$crt=e,void 0===t.$&&(t.$=e),function(e){function i(t){return t._zid||(t._zid=d++)}function n(t,e,n,r){if(e=o(e),e.ns)var a=s(e.ns);return(v[i(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||a.test(t.ns))&&(!n||i(t.fn)===i(n))&&(!r||t.sel==r)})}function o(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function s(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function r(t,e){return t.del&&!y&&t.e in C||!!e}function a(t){return w[t]||y&&C[t]||t}function u(t,n,s,u,c,h,d){var f=i(t),g=v[f]||(v[f]=[]);n.split(/\s/).forEach(function(i){if("ready"==i)return e(document).ready(s);var n=o(i);n.fn=s,n.sel=c,n.e in w&&(s=function(t){var i=t.relatedTarget;if(!i||i!==this&&!e.contains(this,i))return n.fn.apply(this,arguments)}),n.del=h;var f=h||s;n.proxy=function(e){if(e=l(e),!e.isImmediatePropagationStopped()){e.data=u;var i=f.apply(t,e._args==p?[e]:[e].concat(e._args));return i===!1&&(e.preventDefault(),e.stopPropagation()),i}},n.i=g.length,g.push(n),"addEventListener"in t&&t.addEventListener(a(n.e),n.proxy,r(n,d))})}function c(t,e,o,s,u){var c=i(t);(e||"").split(/\s/).forEach(function(e){n(t,e,o,s).forEach(function(e){delete v[c][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,r(e,u))})})}function l(t,i){if(i||!t.isDefaultPrevented){i||(i=t),e.each(b,function(e,n){var o=i[e];t[e]=function(){return this[n]=E,o&&o.apply(i,arguments)},t[n]=F});try{t.timeStamp||(t.timeStamp=Date.now())}catch(t){}(i.defaultPrevented!==p?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(t.isDefaultPrevented=E)}return t}function h(t){var e,i={originalEvent:t};for(e in t)D.test(e)||t[e]===p||(i[e]=t[e]);return l(i,t)}var p,d=1,f=Array.prototype.slice,g=e.isFunction,m=function(t){return"string"==typeof t},v={},A={},y="onfocusin"in t,C={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};A.click=A.mousedown=A.mouseup=A.mousemove="MouseEvents",e.event={add:u,remove:c},e.proxy=function(t,n){var o=2 in arguments&&f.call(arguments,2);if(g(t)){var s=function(){return t.apply(n,o?o.concat(f.call(arguments)):arguments)};return s._zid=i(t),s}if(m(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(t,e,i){return this.on(t,e,i)},e.fn.unbind=function(t,e){return this.off(t,e)},e.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var E=function(){return!0},F=function(){return!1},D=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,b={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,e,i){return this.on(e,t,i)},e.fn.undelegate=function(t,e,i){return this.off(e,t,i)},e.fn.live=function(t,i){return e(document.body).delegate(this.selector,t,i),this},e.fn.die=function(t,i){return e(document.body).undelegate(this.selector,t,i),this},e.fn.on=function(t,i,n,o,s){var r,a,l=this;return t&&!m(t)?(e.each(t,function(t,e){l.on(t,i,n,e,s)}),l):(m(i)||g(o)||o===!1||(o=n,n=i,i=p),o!==p&&n!==!1||(o=n,n=p),o===!1&&(o=F),l.each(function(l,p){s&&(r=function(t){return c(p,t.type,o),o.apply(this,arguments)}),i&&(a=function(t){var n,s=e(t.target).closest(i,p).get(0);if(s&&s!==p)return n=e.extend(h(t),{currentTarget:s,liveFired:p}),(r||o).apply(s,[n].concat(f.call(arguments,1)))}),u(p,t,o,n,i,a||r)}))},e.fn.off=function(t,i,n){var o=this;return t&&!m(t)?(e.each(t,function(t,e){o.off(t,i,e)}),o):(m(i)||g(n)||n===!1||(n=i,i=p),n===!1&&(n=F),o.each(function(){c(this,t,n,i)}))},e.fn.trigger=function(t,i){return t=m(t)||e.isPlainObject(t)?e.Event(t):l(t),t._args=i,this.each(function(){t.type in C&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,i)})},e.fn.triggerHandler=function(t,i){var o,s;return this.each(function(r,a){o=h(m(t)?e.Event(t):t),o._args=i,o.target=a,e.each(n(a,t.type||t),function(t,e){if(s=e.proxy(o),o.isImmediatePropagationStopped())return!1})}),s},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(t,e){m(t)||(e=t,t=e.type);var i=document.createEvent(A[t]||"Events"),n=!0;if(e)for(var o in e)"bubbles"==o?n=!!e[o]:i[o]=e[o];return i.initEvent(t,n,!0),l(i)}}(e),function(){try{getComputedStyle(void 0)}catch(i){var e=getComputedStyle;t.getComputedStyle=function(t,i){try{return e(t,i)}catch(t){return null}}}}(),function(t,e){function i(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function n(t){return o?o+t:t.toLowerCase()}var o,s,r,a,u,c,l,h,p,d,f="",g={Webkit:"webkit",Moz:"",O:"o"},m=document.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,A={};void 0===m.style.transform&&t.each(g,function(t,e){if(void 0!==m.style[t+"TransitionProperty"])return f="-"+t.toLowerCase()+"-",o=e,!1}),s=f+"transform",A[r=f+"transition-property"]=A[a=f+"transition-duration"]=A[c=f+"transition-delay"]=A[u=f+"transition-timing-function"]=A[l=f+"animation-name"]=A[h=f+"animation-duration"]=A[d=f+"animation-delay"]=A[p=f+"animation-timing-function"]="",t.fx={off:void 0===o&&void 0===m.style.transitionProperty,speeds:{_default:400,fast:200,slow:600},cssPrefix:f,transitionEnd:n("TransitionEnd"),animationEnd:n("AnimationEnd")},t.fn.animate=function(e,i,n,o,s){return t.isFunction(i)&&(o=i,n=void 0,i=void 0),t.isFunction(n)&&(o=n,n=void 0),t.isPlainObject(i)&&(n=i.easing,o=i.complete,s=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:t.fx.speeds[i]||t.fx.speeds._default)/1e3),s&&(s=parseFloat(s)/1e3),this.anim(e,i,n,o,s)},t.fn.anim=function(e,n,o,f,g){var m,y,C,w={},E="",F=this,D=t.fx.transitionEnd,b=!1;if(void 0===n&&(n=t.fx.speeds._default/1e3),void 0===g&&(g=0),t.fx.off&&(n=0),"string"==typeof e)w[l]=e,w[h]=n+"s",w[d]=g+"s",w[p]=o||"linear",D=t.fx.animationEnd;else{y=[];for(m in e)v.test(m)?E+=m+"("+e[m]+") ":(w[m]=e[m],y.push(i(m)));E&&(w[s]=E,y.push(s)),n>0&&"object"==typeof e&&(w[r]=y.join(", "),w[a]=n+"s",w[c]=g+"s",w[u]=o||"linear")}return C=function(e){if(void 0!==e){if(e.target!==e.currentTarget)return;t(e.target).unbind(D,C)}else t(this).unbind(D,C);b=!0,t(this).css(A),f&&f.call(this)},n>0&&(this.bind(D,C),setTimeout(function(){b||C.call(F)},1e3*(n+g)+25)),this.size()&&this.get(0).clientLeft,this.css(w),n<=0&&setTimeout(function(){F.each(function(){C.call(this)})},0),this},m=null}(e),function(e,i){function n(t,n,o,s,r){"function"!=typeof n||r||(r=n,n=i);var a={opacity:o};return s&&(a.scale=s,t.css(e.fx.cssPrefix+"transform-origin","0 0")),t.animate(a,n,null,r)}function o(t,i,o,s){return n(t,i,0,o,function(){r.call(e(this)),s&&s.call(this)})}var s=(t.document,e.fn.show),r=e.fn.hide,a=e.fn.toggle;e.fn.show=function(t,e){return s.call(this),t===i?t=0:this.css("opacity",0),n(this,t,1,"1,1",e)},e.fn.hide=function(t,e){return t===i?r.call(this):o(this,t,"0,0",e)},e.fn.toggle=function(t,n){return t===i||"boolean"==typeof t?a.call(this,t):this.each(function(){var i=e(this);i["none"==i.css("display")?"show":"hide"](t,n)})},e.fn.fadeTo=function(t,e,i){return n(this,t,e,null,i)},e.fn.fadeIn=function(t,e){var i=this.css("opacity");return i>0?this.css("opacity",0):i=1,s.call(this).fadeTo(t,i,e)},e.fn.fadeOut=function(t,e){return o(this,t,null,e)},e.fn.fadeToggle=function(t,i){return this.each(function(){var n=e(this);n[0==n.css("opacity")||"none"==n.css("display")?"fadeIn":"fadeOut"](t,i)})}}(e),function(t){function e(e,n){var u=e[a],c=u&&o[u];if(void 0===n)return c||i(e);if(c){if(n in c)return c[n];var l=r(n);if(l in c)return c[l]}return s.call(t(e),n)}function i(e,i,s){var u=e[a]||(e[a]=++t.uuid),c=o[u]||(o[u]=n(e));return void 0!==i&&(c[r(i)]=s),c}function n(e){var i={};return t.each(e.attributes||u,function(e,n){0==n.name.indexOf("data-")&&(i[r(n.name.replace("data-",""))]=t.zepto.deserializeValue(n.value))}),i}var o={},s=t.fn.data,r=t.camelCase,a=t.expando="Zepto"+ +new Date,u=[];t.fn.data=function(n,o){return void 0===o?t.isPlainObject(n)?this.each(function(e,o){t.each(n,function(t,e){i(o,t,e)})}):0 in this?e(this[0],n):void 0:this.each(function(){i(this,n,o)})},t.data=function(e,i,n){return t(e).data(i,n)},t.hasData=function(e){var i=e[a],n=i&&o[i];return!!n&&!t.isEmptyObject(n)},t.fn.removeData=function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.each(function(){var i=this[a],n=i&&o[i];n&&t.each(e||n,function(t){delete n[e?r(this):t]})})},["remove","empty"].forEach(function(e){var i=t.fn[e];t.fn[e]=function(){var t=this.find("*");return"remove"===e&&(t=t.add(this)),t.removeData(),i.call(this)}})}(e),e}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Curator",e):t.Curator=e()}(this,function(){"use strict";function t(t,o){function s(t,e){return function(){c||(o(void 0===l.status?t:l.status,0===l.status?"Error":l.response||l.responseText||e,l),c=!0)}}var r=t.headers||{},a=t.body,u=t.method||(a?"POST":"GET"),c=!1,l=e(t.cors);l.open(u,t.url,!0);var h=l.onload=s(200);l.onreadystatechange=function(){4===l.readyState&&h()},l.onerror=s(null,"Error"),l.ontimeout=s(null,"Timeout"),l.onabort=s(null,"Abort"),a&&(i(r,"X-Requested-With","XMLHttpRequest"),global.FormData&&a instanceof global.FormData||i(r,"Content-Type","application/x-www-form-urlencoded"));for(var p=0,d=n.length,f=void 0;p<d;p++)f=n[p],void 0!==t[f]&&(l[f]=t[f]);for(var g in r)l.setRequestHeader(g,r[g]);return l.send(a),l}function e(t){return t&&window.XDomainRequest&&!/MSIE 1/.test(window.navigator.userAgent)?new window.XDomainRequest:window.XMLHttpRequest?new window.XMLHttpRequest:void 0}function i(t,e,i){t[e]=t[e]||i}var n=["responseType","withCredentials","timeout","onprogress"],o=function(t,e,i,n){if(!Array.isArray(t))throw new TypeError("array is not a Array");var o=t.length;i=parseInt(i,10)||0,n=void 0===n?o:parseInt(n,10)||0;var s,r;for(s=i<0?Math.max(o+i,0):Math.min(i,o),r=n<0?Math.max(o+n,0):Math.min(n,o);s<r;s++)t[s]=e;return t};Array.prototype.fill||(Array.prototype.fill=function(t,e,i){return o(this,t,e,i)}),function(){function t(t,e){return e=e||"","string"!=typeof t&&(t.global&&e.indexOf("g")<0&&(e+="g"),t.ignoreCase&&e.indexOf("i")<0&&(e+="i"),t.multiline&&e.indexOf("m")<0&&(e+="m"),t=t.source),new RegExp(t.replace(/#\{(\w+)\}/g,function(t,e){var i=n.txt.regexen[e]||"";return"string"!=typeof i&&(i=i.source),i}),e)}function e(t,e){return t.replace(/#\{(\w+)\}/g,function(t,i){return e[i]||""})}function i(t,e,i){var n=String.fromCharCode(e);return i!==e&&(n+="-"+String.fromCharCode(i)),t.push(n),t}var n={};n.txt={},n.txt.regexen={};var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};n.txt.htmlEscape=function(t){return t&&t.replace(/[&"'><]/g,function(t){return o[t]})},n.txt.regexSupplant=t,n.txt.stringSupplant=e,n.txt.addCharsToCharClass=i
;var s=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D/.source,r=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,a=/_\u200c\u200d\ua67e\u05be\u05f3\u05f4\uff5e\u301c\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u00b7/.source,u=/\.-/.source;n.txt.regexen.hashSigns=/[#ï¼ƒ]/,n.txt.regexen.hashtagAlpha=new RegExp("["+s+"]"),n.txt.regexen.hashtagAlphaNumeric=new RegExp("["+s+r+a+u+"]"),n.txt.regexen.endHashtagMatch=t(/^(?:#{hashSigns}|:\/\/)/),n.txt.regexen.hashtagBoundary=new RegExp("(?:^|$|[^&"+s+r+a+"])"),n.txt.regexen.validHashtag=t(/[#]+(#{hashtagAlphaNumeric}*)/gi),window.twttr=n}();var s=function(){this.listeners={}};s.prototype.on=function(t,e,i){for(var n=arguments,o=[],s=arguments.length,r=0;r<s;r++)o.push(n[r]);o=o.length>3?o.splice(3,o.length-1):[],void 0!==this.listeners[t]?this.listeners[t].push({scope:i,callback:e,args:o}):this.listeners[t]=[{scope:i,callback:e,args:o}]},s.prototype.off=function(t,e,i){var n=this;if(void 0!==this.listeners[t]){for(var o=this.listeners[t].length,s=[],r=0;r<o;r++){var a=n.listeners[t][r];a.scope===i&&a.callback===e||s.push(a)}this.listeners[t]=s}},s.prototype.has=function(t,e,i){var n=this;if(void 0!==this.listeners[t]){var o=this.listeners[t].length;if(void 0===e&&void 0===i)return o>0;for(var s=0;s<o;s++){var r=n.listeners[t][s];if((!i||r.scope===i)&&r.callback===e)return!0}}return!1},s.prototype.trigger=function(t){for(var e=arguments,i=this,n={type:t},o=[],s=1;s<arguments.length;s++)o.push(e[s]);if(o=[n].concat(o),void 0!==this.listeners[t])for(var r=this.listeners[t].length,a=0;a<r;a++){var u=i.listeners[t][a];if(u&&u.callback){var c=o.concat(u.args);u.callback.apply(u.scope,c)}}},s.prototype.getEvents=function(){var t=this,e="";for(var i in t.listeners)for(var n=t.listeners[i].length,o=0;o<n;o++){var s=t.listeners[i][o];e+=s.scope&&s.scope.className?s.scope.className:"anonymous",e+=" listen for '"+i+"'\n"}return e},s.prototype.destroy=function(){this.listeners={}};for(var r={postUrl:function(t){return t.url&&""!==t.url&&"''"!==t.url?t.url:t.network_id+""=="1"?"https://twitter.com/"+t.user_screen_name+"/status/"+t.source_identifier:""},center:function(t,e,i){var n=window.screen,o=i||{},s=o.height||n.height,r=o.width||n.height;return{top:s?(s-e)/2:0,left:r?(r-t)/2:0}},popup:function(t,e,i,n,o){var s=this.center(i,n),r="height="+n+",width="+i+",top="+s.top+",left="+s.left+",scrollbars="+o+",resizable";window.open(t,e,r)},tinyparser:function(t,e){return t.replace(/\{\{(.*?)\}\}/g,function(t,i){return e&&void 0!==e[i]?encodeURIComponent(e[i]):""})},debounce:function(t,e,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,i||t.apply(o,s)},a=i&&!n;window.clearTimeout(n),n=window.setTimeout(r,e),a&&t.apply(o,s)}},uId:function(){return"_"+Math.random().toString(36).substr(2,9)}},a={camelize:function(t){return t.replace(/(?:^|[-_])(\w)/g,function(t,e){return e?e.toUpperCase():""})},twitterLinks:function(t){return t=t.replace(/[@]+[A-Za-z0-9-_]+/g,function(t){var e=t.replace("@","");return a.url("https://twitter.com/"+e,t)}),t=t.replace(twttr.txt.regexen.validHashtag,function(t){var e=t.replace("#","%23");return a.url("https://twitter.com/search?q="+e,t)})},instagramLinks:function(t){return t=t.replace(/[@]+[A-Za-z0-9-_\.]+/g,function(t){var e=t.replace("@","");return a.url("https://www.instagram.com/"+e+"/",t)}),t=t.replace(twttr.txt.regexen.validHashtag,function(t){var e=t.replace("#","");return a.url("https://www.instagram.com/explore/tags/"+e+"/",t)})},facebookLinks:function(t){return t=t.replace(/[@]+[A-Za-z0-9-_]+/g,function(t){var e=t.replace("@","");return a.url("https://www.facebook.com/"+e+"/",t)}),t=t.replace(/[#]+[A-Za-z0-9-_]+/g,function(t){var e=t.replace("#","%23");return a.url("https://www.facebook.com/search/top/?q="+e,t)})},linksToHref:function(t){return t=t.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+[A-Za-z0-9-_:%&~\?\/=]+/g,function(t){return a.url(t)})},url:function(t,e){return e=e||t,'<a href="'+t+'" target="_blank">'+e+"</a>"},youtubeVideoId:function(t){var e=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);if(e&&11===e[7].length)return e[7];var i=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/))([^#\&\?]*).*/);return!(!i||11!==i[6].length)&&i[6]},vimeoVideoId:function(t){var e=t.match(/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/);return!!(e&&e.length>=2)&&e[1]},filterHtml:function(t){try{var e=document.createElement("div");e.innerHTML=t;return e.textContent||e.innerText||""}catch(e){return t}},nl2br:function(t){return t=t.trim(),t=t.replace(/(?:\r\n|\r|\n)/g,"<br />")}},u={share:function(t){var e=t;e.url=r.postUrl(t),e.cleanText=a.filterHtml(t.text),0!==e.url.indexOf("http")&&(e.url=e.image);var i=r.tinyparser("https://www.facebook.com/sharer/sharer.php?u={{url}}&d={{cleanText}}",e);r.popup(i,"twitter","600","430","0")}},c={share:function(t){var e=t;e.url=r.postUrl(t),e.cleanText=a.filterHtml(t.text);var i=r.tinyparser("http://twitter.com/share?url={{url}}&text={{cleanText}}&hashtags={{hashtags}}",e);r.popup(i,"twitter","600","430","0")}},l={debug:!1,log:function(t){window.console&&l.debug&&window.console.log(t)}},h={FEED_LOADED:"feed:loaded",FEED_FAILED:"feed:failed",FILTER_CHANGED:"filter:changed",POSTS_LOADED:"posts:loaded",POSTS_FAILED:"posts:failed",POSTS_RENDERED:"posts:rendered",POST_CREATED:"post:created",POST_CLICK:"post:click",POST_CLICK_READ_MORE:"post:clickReadMore",POST_IMAGE_LOADED:"post:imageLoaded",CAROUSEL_CHANGED:"curator:changed"},p={filter:'<div class="crt-filter"> <div class="crt-filter-networks"><ul class="crt-networks"> </ul></div> <div class="crt-filter-sources"><ul class="crt-sources"> </ul></div> </div>',popup:' \n<div class="crt-popup"> \n    <a href="#" class="crt-close crt-icon-cancel"></a> \n    <a href="#" class="crt-next crt-icon-right-open"></a> \n    <a href="#" class="crt-previous crt-icon-left-open"></a> \n    <div class="crt-popup-left">  \n        <div class="crt-video"> \n            <div class="crt-video-container">\n                <video preload="none">\n                <source src="<%=video%>" type="video/mp4">\n                </video>\n                <img src="<%=image%>" />\n                <a href="javascript:;" class="crt-play"><i class="crt-play-icon"></i></a> \n            </div> \n        </div> \n        <div class="crt-image"> \n            <img src="<%=image%>" /> \n        </div> \n        <div class="crt-pagination"><ul></ul></div>\n    </div> \n    <div class="crt-popup-right"> \n        <div class="crt-popup-header"> \n            <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n            <img src="<%=user_image%>"  /> \n            <div class="crt-post-name"><span><%=user_full_name%></span><br/><a href="<%=this.userUrl()%>" target="_blank">@<%=user_screen_name%></a></div> \n        </div> \n        <div class="crt-popup-text <%=this.contentTextClasses()%>"> \n            <div class="crt-popup-text-container"> \n                <p class="crt-date"><%=this.prettyDate(source_created_at)%></p> \n                <div class="crt-popup-text-body"><%=this.parseText(text)%></div> \n            </div> \n        </div> \n        <div class="crt-popup-read-more">\n            <a href="#" class="crt-post-read-more-button"><%=this._t("read-more")%></a> \n        </div>\n        <div class="crt-popup-footer">\n            <div class="crt-popup-stats"><span><%=likes%></span> <%=this._t("likes", likes)%> <i class="sep"></i> <span><%=comments%></span> <%=this._t("comments", comments)%></div> \n            <div class="crt-post-share"><span class="ctr-share-hint"></span><a href="#" class="crt-share-facebook"><i class="crt-icon-facebook"></i></a>  <a href="#" class="crt-share-twitter"><i class="crt-icon-twitter"></i></a></div>\n        </div> \n    </div> \n</div>',"popup-underlay":"","popup-wrapper":' <div class="crt-popup-wrapper">     <div class="crt-popup-wrapper-c">         <div class="crt-popup-underlay"></div>         <div class="crt-popup-container"></div>     </div> </div>',"post-v1":' <div class="crt-post-v1 crt-post-c">    <div class="crt-post-bg"></div>     <div class="crt-post post<%=id%> crt-post-<%=this.networkIcon()%>">         <div class="crt-post-header">             <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span>             <img src="<%=user_image%>"  />             <div class="crt-post-name">            <div class="crt-post-fullname"><%=user_full_name%></div>            <div class="crt-post-username"><a href="<%=this.userUrl()%>" target="_blank">@<%=user_screen_name%></a></div>            </div>         </div>         <div class="crt-post-content">             <div class="crt-image crt-hitarea crt-post-content-image <%=this.contentImageClasses()%>" >                 <div class="crt-image-c"><img src="<%=image%>" class="crt-post-image" /></div>                 <span class="crt-play"><i class="crt-play-icon"></i></span>             </div>             <div class="text crt-post-content-text <%=this.contentTextClasses()%>">                 <div class="crt-post-text-body"><%=this.parseText(text)%></div>             </div>         </div>         <div class="crt-post-footer">            <div class="crt-date"><%=this.prettyDate(source_created_at)%></div>             <div class="crt-post-share"><span class="ctr-share-hint"></span><a href="#" class="crt-share-facebook"><i class="crt-icon-facebook"></i></a>  <a href="#" class="crt-share-twitter"><i class="crt-icon-twitter"></i></a></div>        </div>         <div class="crt-post-read-more"><a href="#" class="crt-post-read-more-button">Read more</a> </div>     </div></div>',"grid-post-v1":' <div class="crt-post-c">    <div class="crt-post post<%=id%> <%=this.contentImageClasses()%> <%=this.contentTextClasses()%>">         <div class="crt-post-content">             <div class="crt-hitarea" >                 <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="spacer" />                 <div class="crt-post-content-image" style="background-image: url(<%=image%>);"> </div>                 <div class="crt-post-content-text-c">                     <div class="crt-post-content-text">                         <%=this.parseText(text)%>                     </div>                 </div>                 <a href="javascript:;" class="crt-play"><i class="crt-play-icon"></i></a>                 <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span>                 <div class="crt-post-hover">                    <div class="crt-post-header">                         <img src="<%=user_image%>"  />                         <div class="crt-post-name"><span><%=user_full_name%></span><br/><a href="<%=this.userUrl()%>" target="_blank">@<%=user_screen_name%></a></div>                     </div>                     <div class="crt-post-hover-text">                         <%=this.parseText(text)%>                     </div>                     <span class="crt-social-icon crt-social-icon-hover"><i class="crt-icon-<%=this.networkIcon()%>"></i></span>                 </div>             </div>         </div>     </div></div>',"post-v2":' \n<div class="crt-post-v2 crt-post crt-post-<%=this.networkIcon()%> <%=this.contentTextClasses()%>  <%=this.contentImageClasses()%>" data-post="<%=id%>"> \n    <div class="crt-post-border">\n        <div class="crt-post-c">\n            <div class="crt-post-content">\n                <div class="crt-image crt-hitarea crt-post-content-image" > \n                    <div class="crt-image-c"><img src="<%=image%>" class="crt-post-image" /></div> \n                    <span class="crt-play"><i class="crt-play-icon"></i></span> \n                    <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n                </div> \n                <div class="crt-post-header"> \n                    <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                    <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=user_full_name%></a></div>\n                </div> \n                <div class="text crt-post-content-text"> \n                    <%=this.parseText(text)%> \n                </div> \n                <div class="crt-post-read-more"><a href="#" class="crt-post-read-more-button"><%=this._t("read-more")%></a> </div> \n            </div> \n            <div class="crt-post-footer">\n                <img class="crt-post-userimage" src="<%=user_image%>" /> \n                <span class="crt-post-username"><a href="<%=this.userUrl()%>" target="_blank">@<%=user_screen_name%></a></span>\n                <span class="crt-date"><%=this.prettyDate(source_created_at)%></span> \n                <div class="crt-post-share"><span class="ctr-share-hint"></span><a href="#" class="crt-share-facebook"><i class="crt-icon-facebook"></i></a>  <a href="#" class="crt-share-twitter"><i class="crt-icon-twitter"></i></a></div>\n            </div> \n        </div> \n    </div> \n</div>',"grid-post-v2":'\n<div class="crt-grid-post crt-grid-post-v2 crt-post-<%=id%> <%=this.contentImageClasses()%> <%=this.contentTextClasses()%>">     <div class="crt-post-c"> \n        <div class="crt-post-content"> \n            <div class="crt-hitarea" > \n                <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="crt-spacer" /> \n                <div class="crt-grid-post-image">\n                    <div class="crt-post-content-image" style="background-image: url(<%=image%>);"> </div> \n                    <a href="javascript:;" class="crt-play"><i class="crt-play-icon"></i></a> \n                    <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                    <div class="crt-image-carousel"><i class="crt-icon-image-carousel"></i></div> \n                </div>\n                <div class="crt-grid-post-text">\n                    <div class="crt-grid-post-text-wrap"> \n                        <div><%=this.parseText(text)%></div> \n                    </div> \n                    <span class="crt-social-icon crt-social-icon-normal"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                </div>\n                <div class="crt-post-hover">\n                    <div class="crt-post-header"> \n                        <span class="crt-social-icon"><i class="crt-icon-<%=this.networkIcon()%>"></i></span> \n                        <div class="crt-post-fullname"><a href="<%=this.userUrl()%>" target="_blank"><%=user_full_name%></a></div>\n                    </div> \n                    <div class="crt-post-content-text"> \n                        <%=this.parseText(text)%> \n                    </div> \n                    <div class="crt-post-read-more"><a href="#" class="crt-post-read-more-button"><%=this._t("read-more")%></a></div> \n                    <div class="crt-post-footer">\n                        <img class="crt-post-userimage" src="<%=user_image%>" /> \n                        <span class="crt-post-username"><a href="<%=this.userUrl()%>" target="_blank">@<%=user_screen_name%></a></span>\n                        <span class="crt-date"><%=this.prettyDate(source_created_at)%></span> \n                        <div class="crt-post-share"><span class="ctr-share-hint"></span><a href="#" class="crt-share-facebook"><i class="crt-icon-facebook"></i></a>  <a href="#" class="crt-share-twitter"><i class="crt-icon-twitter"></i></a></div>\n                    </div> \n                </div> \n            </div> \n        </div> \n    </div>\n</div>',"grid-feed-v2":' <div class="crt-feed-window">    <div class="crt-feed"></div></div><div class="crt-feed-more"><a href="#">Load more</a></div>'},d=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},f=function(t){return"object"==typeof t&&null!==t},g=function(t){return"[object String]"===Object.prototype.toString.call(t)},m={getTranslationFunction:function(t,e){function i(e){if(t[e])return t[e];var i=e.split(r),n=i[0],o=i[1];return t[n]&&t[n][o]?t[n][o]:null}function n(t,e){if(f(t)){var i,n=Object.keys(t);if(0===n.length)return s&&window.console.log("[Translation] No plural forms found."),null;for(var o=0;o<n.length;o++)0===n[o].indexOf("gt")&&(i=parseInt(n[o].replace("gt",""),10));t[e]?t=t[e]:e>i?t=t["gt"+i]:t.n?t=t.n:(s&&window.console.log('[Translation] No plural forms found for count:"'+e+'" in',t),t=t[Object.keys(t).reverse()[0]])}return t}function o(t,e){return g(t)?t.replace(/\{(\w*)\}/g,function(t,i){return e.hasOwnProperty(i)?e.hasOwnProperty(i)?e[i]:i:(s&&window.console.log('Could not find replacement "'+i+'" in provided replacements object:',e),"{"+i+"}")}):t}e=f(e)?e:{};var s=e.debug,r=e.namespaceSplitter||"::";return function(t){var e=f(arguments[1])?arguments[1]:f(arguments[2])?arguments[2]:{},r=d(arguments[1])?arguments[1]:d(arguments[2])?arguments[2]:null,a=i(t);return null!==r&&(e.n=e.n?e.n:r,a=n(a,r)),a=o(a,e),null===a&&(a=s?"@@"+t+"@@":t,s&&window.console.log('Translation for "'+t+'" not found.')),a}}},v="\nid,en,de,it,nl,es\nload-more,Load more,Mehr anzeigen,Di piÃ¹,Laad meer,Cargar mÃ¡s\nminutes-ago.1,{n} minute ago,Vor einer Minute,Un minuto fa,{n} minuut geleden,Hace un minuto\nminutes-ago.n,{n} minutes ago,Vor {n} Minuten,{n} minuti fa,{n} minuten geleden,Hace {n} minutos\nhours-ago.1,{n} hour ago,Vor einer Stunde,Un'ora fa,{n} uur geleden,Hace una hora\nhours-ago.n,{n} hours ago,Vor {n} Stunden,{n} ore fa,{n} uren geleden,Hace {n} horas\ndays-ago.1,{n} day ago,Vor einem Tag,Un giorno fa,{n} dag geleden,Hace un dÃ­a\ndays-ago.n,{n} days ago,Vor {n} Tagen,{n} giorni fa,{n} dagen geleden,Hace {n} dÃ­as\nweeks-ago.1,{n} week ago,Vor einer Woche,Una settimana fa,{n} week geleden,Hace una semana\nweeks-ago.n,{n} weeks ago,Vor {n} Wochen,{n} settimane fa,{n} weken geleden,Hace {n} semanas\nmonths-ago.1,{n} month ago,Vor einem Monat,Un mese fa,{n} maand geleden,Hace un mes\nmonths-ago.n,{n} months ago,Vor {n} Monaten,{n} mesi,{n} maanden geleden,Hace {n} meses\nyesterday,Yesterday,Gestern,Leri,Gisteren,Ayer\njust-now,Just now,Eben,Appena,Nu,Ahora\nprevious,Previous,ZurÃ¼ck,Indietro,Vorige,Anterior\nnext,Next,Weiter,PiÃ¹,Volgende,Siguiente\ncomments,Comments,Kommentare,Commenti,Comments,Comentarios\nlikes,Likes,GefÃ¤llt mir,Mi piace,Likes,Me gusta\nread-more,Read more,Weiterlesen,Di piÃ¹,Lees meer,Leer mÃ¡s\n",A={},y=v.split("\n"),C=y.length-1;C>=0;C--)y[C]||y.splice(C,1);for(var w=y[0].split(","),E=1;E<y.length;E++)for(var F=y[E].split(","),D=1;D<F.length;D++)!function(t,e,i){for(var n=e.split("."),o=0;o<n.length;o++){var s=n[o];t[s]||(t[s]={}),o===n.length-1?t[s]=i:t=t[s]}}(A,w[D]+"."+F[0],F[D]);var b={},B="en",P={setLang:function(t){B=t},t:function(t,e,i){return i=i||B,b[i]||(A[i]?b[i]=m.getTranslationFunction(A[i]):(window.console.error("Unsupported language `"+i+"`"),b[i]=m.getTranslationFunction(A.en))),t=t.toLowerCase(),t=t.replace(" ","-"),b[i](t,e)}},_={dateFromString:function(t){var e=t.replace(/\D/g," "),i=e.split(" ");return i[1]--,new Date(Date.UTC(i[0],i[1],i[2],i[3],i[4],i[5]))},dateAsDayMonthYear:function(t){var e=new Date(parseInt(t,10)),i=e.getDate()+"",n=e.getMonth()+1+"",o=e.getFullYear()+"";return i=1===i.length?"0"+i:i,n=1===n.length?"0"+n:n,i+"/"+n+"/"+o},dateAsTimeArray:function(t){var e,i=new Date(parseInt(t,10)),n=i.getHours()+"",o=i.getMinutes()+"";return n>=12?(e="PM",n>12&&(n=n-12+"")):e="AM",n=1===n.length?"0"+n:n,o=1===o.length?"0"+o:o,[parseInt(n.charAt(0),10),parseInt(n.charAt(1),10),parseInt(o.charAt(0),10),parseInt(o.charAt(1),10),e]},fuzzyDate:function(t){var e=Date.parse(t+" UTC"),i=Math.round((new Date-e)/1e3);return i<30?"Just now":i<60?i+" seconds ago":i<120?"a minute ago.":i<3600?Math.floor(i/60)+" minutes ago":1===Math.floor(i/3600)?"1 hour ago.":i<86400?Math.floor(i/3600)+" hours ago":i<172800?"Yesterday":i<604800?"This week":i<1209600?"Last week":i<2592e3?"This month":e},prettyDate:function(t){var e=_.dateFromString(t),i=((new Date).getTime()-e.getTime())/1e3,n=Math.floor(i/86400),o=e.getFullYear(),s=e.getMonth()+1,r=e.getDate();if(isNaN(n)||n<0||n>=31)return o.toString()+"-"+(s<10?"0"+s.toString():s.toString())+"-"+(r<10?"0"+r.toString():r.toString());var a=Math.floor(i/60),u=Math.floor(i/3600),c=Math.ceil(n/7);return 0===n&&(i<60&&P.t("Just now")||i<3600&&P.t("minutes ago",a)||i<86400&&P.t("hours ago",u))||1===n&&P.t("Yesterday")||n<7&&P.t("days ago",n)||n<31&&P.t("weeks ago",c)}},$={networkIcon:function(){return this.data.network_name.toLowerCase()},networkName:function(){return this.data.network_name.toLowerCase()},userUrl:function(){if(this.data.user_url&&""!==this.data.user_url)return this.data.user_url;if(this.data.originator_user_url&&""!==this.data.originator_user_url)return this.data.originator_user_url;if(this.data.userUrl&&""!==this.data.userUrl)return this.data.userUrl;var t=this.data.network_id+"";return"1"===t?"http://twitter.com/"+this.data.user_screen_name:"2"===t?"http://instagram.com/"+this.data.user_screen_name:"3"===t?"http://facebook.com/"+this.data.user_screen_name:"#"},parseText:function(t){return this.data.is_html?t:("Twitter"===this.data.network_name?(t=a.linksToHref(t),t=a.twitterLinks(t)):"Instagram"===this.data.network_name?(t=a.linksToHref(t),t=a.instagramLinks(t)):"Facebook"===this.data.network_name?(t=a.linksToHref(t),t=a.facebookLinks(t)):t=a.linksToHref(t),a.nl2br(t))},nl2br:function(t){return a.nl2br(t)},contentImageClasses:function(){return this.data.image?"crt-post-has-image":"crt-post-content-image-hidden crt-post-no-image"},contentTextClasses:function(){return this.data.text?"crt-post-has-text":"crt-post-content-text-hidden crt-post-no-text"},fuzzyDate:function(t){return _.fuzzyDate(t)},prettyDate:function(t){return _.prettyDate(t)},_t:function(t,e){return P.t(t,e)}},x=null;window.$crt?x=window.$crt:window.Zepto?x=window.Zepto:window.jQuery?x=window.jQuery:window.alert("Curator requires jQuery or Zepto. \n\nPlease include jQuery in your HTML before the Curator widget script tag.\n\nVisit http://jquery.com/download/ to get the latest version");var k=x,L={},S={renderTemplate:function(t,e){var i="",n=k("#"+t);if(1===n.length?i=n.html():void 0!==p[t]&&(i=p[t]),""===i)throw new Error("Could not find template "+t);var o=S.render(i,e);return k.parseHTML&&(o=k.parseHTML(o)),k(o).filter("div")},render:function(t,e){var i="";try{var n=L[t];if(!n){var o=t.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('"),s="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+o+"');}return p.join('');";n=new Function("obj",s),L[t]=n}return $.data=e,n.call($,e)}catch(t){l.log("Template parse error: "+t.message),i=t.message}return" # ERROR: "+i+" # "}},T=function(t){function e(e,i,n){var o=this;t.call(this),this.options=i,this.widget=n;var s=this.widget.options.templatePost;if(this.json=e,this.$el=S.renderTemplate(s,e),this.$postC=this.$el.find(".crt-post-c"),this.$image=this.$el.find(".crt-post-image"),this.$imageContainer=this.$el.find(".crt-image-c"),this.$el.find(".crt-share-facebook").click(this.onShareFacebookClick.bind(this)),this.$el.find(".crt-share-twitter").click(this.onShareTwitterClick.bind(this)),this.$el.find(".crt-post-read-more-button").click(this.onReadMoreClick.bind(this)),this.$postC.click(this.onPostClick.bind(this)),this.$image.css({opacity:0}),this.json.image?(this.$image.on("load",this.onImageLoaded.bind(this)),this.$image.on("error",this.onImageError.bind(this))):window.setTimeout(function(){o.setHeight()},100),this.json.image_width>0){var r=this.json.image_height/this.json.image_width*100;this.$imageContainer.addClass("crt-image-responsive").css("padding-bottom",r+"%")}0!==this.json.url.indexOf("http")&&this.$el.find(".crt-post-share").hide(),this.$image.data("dims",this.json.image_width+":"+this.json.image_height),this.json.video&&this.$el.addClass("crt-post-has-video"),this.json.images&&this.json.images.length>0&&this.$el.addClass("crt-has-image-carousel")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onShareFacebookClick=function(t){return t.preventDefault(),u.share(this.json),this.widget.track("share:facebook"),!1},e.prototype.onShareTwitterClick=function(t){return t.preventDefault(),c.share(this.json),this.widget.track("share:twitter"),!1},e.prototype.onPostClick=function(t){l.log("Post->click");var e=k(t.target);e.is("a")&&"#"!==e.attr("href")?this.widget.track("click:link"):(t.preventDefault(),this.trigger(h.POST_CLICK,this,this.json,t))},e.prototype.onImageLoaded=function(){this.$image.animate({opacity:1}),this.setHeight(),this.trigger(h.POST_IMAGE_LOADED,this)},e.prototype.onImageError=function(){this.$image.hide(),this.setHeight()},e.prototype.setHeight=function(){var t=this.$postC.height();this.options.maxHeight&&this.options.maxHeight>0&&t>this.options.maxHeight&&(this.$postC.css({maxHeight:this.options.maxHeight}),this.$el.addClass("crt-post-max-height")),this.layout()},
e.prototype.layout=function(){this.layoutFooter()},e.prototype.layoutFooter=function(){var t=this.$el.find(".crt-post-username"),e=this.$el.find(".crt-date"),i=this.$el.find(".crt-post-footer"),n=this.$el.find(".crt-post-share"),o=this.$el.find(".crt-post-userimage"),s=i.width();t.width()+e.width()+n.width()+o.width()+40>s&&t.hide()},e.prototype.onReadMoreClick=function(t){t.preventDefault(),this.widget.track("click:read-more"),this.trigger(h.POST_CLICK_READ_MORE,this,this.json,t)},e}(s),N={checkContainer:function(t){return l.log("Curator->checkContainer: "+t),0!==k(t).length||(window.console&&window.console.log("Curator could not find the element "+t+". Please ensure this element existings in your HTML code. Exiting."),!1)},checkPowered:function(t){return l.log("Curator->checkPowered"),t.html().indexOf("Curator")>0||(window.alert("Container is missing Powered by Curator"),!1)},addCSSRule:function(t,e,i,n){n=n||0,"insertRule"in t?t.insertRule(e+"{"+i+"}",0):"addRule"in t&&t.addRule(e,i)},createSheet:function(){var t=document.createElement("style");return t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet},loadCSS:function(){}},I=function(t){return"?"+Object.keys(t).reduce(function(e,i){return e.push(i+"="+encodeURIComponent(t[i])),e},[]).join("&")},O=function(t){var e=window.location.protocol,i=t.indexOf("://");return i&&(t=t.substr(i+3)),e="https:"!==e&&"http:"!==e?"https:":e,t=e+"//"+t},M={get:function(e,i,n,o){e=O(e),i&&(e+=I(i)),t({url:e,cors:!0},function(t,e){t?n(JSON.parse(e)):o(t,e)})},post:function(e,i,n,o){e=O(e),t({url:e,cors:!0,body:i,method:"POST"},function(t,e){t?n(JSON.parse(e)):o(t,e)})}},H=function(t){function e(e){t.call(this),l.log("Feed->init with options"),this.widget=e,this.posts=[],this.currentPage=0,this.postsLoaded=0,this.postCount=0,this.loading=!1,this.allPostsLoaded=!1,this.pagination={after:null,before:null},this.options=this.widget.options,this.params=this.options.feedParams||{},this.params.limit=this.options.postsPerPage,this.feedBase=this.options.apiEndpoint+"/feeds"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadPosts=function(t,e){if(t=t||0,l.log("Feed->loadPosts "+this.loading),this.loading)return!1;this.currentPage=t;var i=k.extend({},this.options.feedParams,e);i.limit=this.options.postsPerPage,i.offset=t*this.options.postsPerPage,this._loadPosts(i)},e.prototype.loadMore=function(t){if(l.log("Feed->loadMore "+this.loading),this.loading)return!1;var e={limit:this.options.postsPerPage};k.extend(e,this.options.feedParams,t),e.offset=this.posts.length,this._loadPosts(e)},e.prototype.load=function(t){if(l.log("Feed->load "+this.loading),this.loading)return!1;this.currentPage=0;var e=k.extend(this.params,t);this._loadPosts(e)},e.prototype.loadAfter=function(){if(l.log("Feed->loadAfter "+this.loading),this.loading)return!1;this.currentPage=0;var t=k.extend({},this.params);this.pagination&&this.pagination.after&&(t.after=this.pagination.after,delete t.before),this._loadPosts(t)},e.prototype._loadPosts=function(t){var e=this;l.log("Feed->_loadPosts"),this.loading=!0,t.rnd=(new Date).getTime(),M.get(this.getUrl("/posts"),t,function(t){l.log("Feed->_loadPosts success"),t.success?(e.postCount=t.postCount,e.postsLoaded+=t.posts.length,e.allPostsLoaded=e.postsLoaded>=e.postCount,e.posts=e.posts.concat(t.posts),e.networks=t.networks,t.pagination&&(e.pagination=t.pagination),e.widget.trigger(h.FEED_LOADED,t),e.widget.trigger(h.POSTS_LOADED,t.posts),e.trigger(h.FEED_LOADED,t),e.trigger(h.POSTS_LOADED,t.posts)):e.trigger(h.POSTS_FAILED,t.posts),e.loading=!1},function(t,i,n){l.log("Feed->_loadPosts fail"),l.log(i),l.log(n),e.trigger(h.POSTS_FAILED,[]),e.loading=!1})},e.prototype.loadPost=function(t,e,i){i=i||function(){},M.get(this.getUrl("/post/"+t),{},function(t){t.success?e(t.post):i()},function(t,e,i){})},e.prototype.inappropriatePost=function(t,e,i,n){var o={reason:e};M.post(this.getUrl("/post/"+t+"/inappropriate"),o,function(t,e,o){t=k.parseJSON(t),t.success===!0?i():n(o)})},e.prototype.lovePost=function(t,e,i){var n={};k.post(this.getUrl("/post/"+t+"/love"),n,function(t,n,o){t=k.parseJSON(t),t.success===!0?e(t.loves):i(o)})},e.prototype.getUrl=function(t){return this.feedBase+"/"+this.options.feedId+t},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(s),j={1:{name:"Twitter",icon:"crt-icon-twitter"},2:{name:"Instagram",icon:"crt-icon-instagram"},3:{name:"Facebook",icon:"crt-icon-facebook"},4:{name:"Pinterest",icon:"crt-icon-pinterest"},5:{name:"Google",icon:"crt-icon-google"},6:{name:"Vine",icon:"crt-icon-vine"},7:{name:"Flickr",icon:"crt-icon-flickr"},8:{name:"Youtube",icon:"crt-icon-youtube"},9:{name:"Tumblr",icon:"crt-icon-tumblr"},10:{name:"RSS",icon:"crt-icon-rss"},11:{name:"LinkedIn",icon:"crt-icon-linkedin"}},R=function(t){function e(e){var i=this;l.log("Filter->construct"),t.call(this),this.client=e,this.options=e.options,this.$filter=S.renderTemplate(this.options.templateFilter,{}),this.$filterNetworks=this.$filter.find(".crt-filter-networks"),this.$filterNetworksUl=this.$filter.find(".crt-filter-networks ul"),this.$filterSources=this.$filter.find(".crt-filter-sources"),this.$filterSourcesUl=this.$filter.find(".crt-filter-sources ul"),this.client.$container.append(this.$filter),this.$filterNetworks.find("label").text(this.client.options.filter.networksLabel),this.$filterSources.find("label").text(this.client.options.filter.sourcesLabel),this.$filter.on("click",".crt-filter-networks a",function(t){t.preventDefault();var e=k(t.target),n=e.data("network");i.$filter.find(".crt-filter-networks li").removeClass("active"),e.parent().addClass("active"),i.client.trigger(h.FILTER_CHANGED),n?i.client.feed.loadPosts(0,{network_id:n}):i.client.feed.loadPosts(0,{})}),this.$filter.on("click",".crt-filter-sources a",function(t){t.preventDefault();var e=k(t.target),n=e.data("source");i.$filter.find(".crt-filter-sources li").removeClass("active"),e.parent().addClass("active"),i.client.trigger(h.FILTER_CHANGED),n?i.client.feed.loadPosts(0,{source_id:n}):i.client.feed.loadPosts(0,{})}),this.client.on(h.FEED_LOADED,this.onPostsLoaded.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onPostsLoaded=function(t,e){var i=this,n=e.networks,o=e.sources;if(!this.filtersLoaded){if(this.options.filter.showNetworks){this.$filterNetworksUl.append('<li class="crt-filter-label"><label>'+this.client.options.filter.networksLabel+"</label></li>"),this.$filterNetworksUl.append('<li class="active"><a href="#" data-network="0"> All</a></li>');for(var s=0,r=n;s<r.length;s+=1){var a=r[s],u=j[a];u&&i.$filterNetworksUl.append('<li><a href="#" data-network="'+a+'"><i class="'+u.icon+'"></i> '+u.name+"</a></li>")}}else this.$filterNetworks.hide();if(this.options.filter.showSources){this.$filterSourcesUl.append('<li class="crt-filter-label"><label>'+this.client.options.filter.sourcesLabel+"</label></li>"),this.$filterSourcesUl.append('<li class="active"><a href="#" data-source="0"> All</a></li>');for(var c=0,l=o;c<l.length;c+=1){var h=l[c],p=j[h.network_id];p&&i.$filterSourcesUl.append('<li><a href="#" data-source="'+h.id+'"><i class="'+p.icon+'"></i> '+h.name+"</a></li>")}}else this.$filterSources.hide();this.filtersLoaded=!0}},e.prototype.destroy=function(){this.$filter.remove()},e}(s),U=function(t,e,i){var n=this;l.log("Popup->init "),this.popupManager=t,this.json=e,this.widget=i;var o=this.widget.options.templatePopup;if(this.videoPlaying=!1,this.$popup=S.renderTemplate(o,this.json),this.json.image&&this.$popup.addClass("has-image"),this.json.video&&this.$popup.addClass("has-video"),this.json.video&&this.json.video.indexOf("youtu")>=0){this.$popup.find("video").remove();var s=a.youtubeVideoId(this.json.video),r='<iframe id="ytplayer" width="615" height="615"             src="https://www.youtube.com/embed/'+s+'?autoplay=0&rel=0&showinfo"             frameborder="0"></iframe>';this.$popup.find(".crt-video-container img").remove(),this.$popup.find(".crt-video-container a").remove(),this.$popup.find(".crt-video-container").append(r)}else if(this.json.video&&this.json.video.indexOf("vimeo")>=0){this.$popup.find("video").remove();var u=a.vimeoVideoId(this.json.video);if(u){var c='<iframe src="https://player.vimeo.com/video/'+u+'?color=ffffff&title=0&byline=0&portrait=0" width="615" height="615" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';this.$popup.find(".crt-video-container img").remove(),this.$popup.find(".crt-video-container a").remove(),this.$popup.find(".crt-video-container").append(c)}}if(this.json.images){this.$page=this.$popup.find(".crt-pagination ul");for(var h=0;h<this.json.images.length;h++)n.$page.append('<li><a href="" data-page="'+h+'"></a></li>');this.$page.find("a").click(this.onPageClick.bind(this)),this.currentImage=0,this.$page.find("li:nth-child("+(this.currentImage+1)+")").addClass("selected")}this.$popup.on("click"," .crt-close",this.onClose.bind(this)),this.$popup.on("click"," .crt-previous",this.onPrevious.bind(this)),this.$popup.on("click"," .crt-next",this.onNext.bind(this)),this.$popup.on("click"," .crt-play",this.onPlay.bind(this)),this.$popup.on("click",".crt-share-facebook",this.onShareFacebookClick.bind(this)),this.$popup.on("click",".crt-share-twitter",this.onShareTwitterClick.bind(this))};U.prototype.onPageClick=function(t){t.preventDefault();var e=k(t.target),i=e.data("page"),n=this.json.images[i];this.$popup.find(".crt-image img").attr("src",n.url),this.currentImage=i,this.$page.find("li").removeClass("selected"),this.$page.find("li:nth-child("+(this.currentImage+1)+")").addClass("selected")},U.prototype.onShareFacebookClick=function(t){return t.preventDefault(),u.share(this.json),this.widget.track("share:facebook"),!1},U.prototype.onShareTwitterClick=function(t){return t.preventDefault(),c.share(this.json),this.widget.track("share:twitter"),!1},U.prototype.onClose=function(t){t.preventDefault();var e=this;this.hide(function(){e.popupManager.onClose()})},U.prototype.onPrevious=function(t){t.preventDefault(),this.popupManager.onPrevious()},U.prototype.onNext=function(t){t.preventDefault(),this.popupManager.onNext()},U.prototype.onPlay=function(t){l.log("Popup->onPlay"),t.preventDefault(),this.videoPlaying=!this.videoPlaying,this.videoPlaying?(this.$popup.find("video")[0].play(),this.widget.track("video:play")):(this.$popup.find("video")[0].pause(),this.widget.track("video:pause")),l.log(this.videoPlaying),this.$popup.toggleClass("video-playing",this.videoPlaying)},U.prototype.show=function(){this.$popup.fadeIn(function(){})},U.prototype.hide=function(t){l.log("Popup->hide");var e=this;this.$popup.fadeOut(function(){e.destroy(),t()})},U.prototype.destroy=function(){this.$popup&&this.$popup.length&&(this.$popup.remove(),this.$popup.find("video").length&&this.$popup.find("video")[0].pause()),delete this.$popup};var W=function(t){l.log("PopupManager->init "),this.widget=t;var e=this.widget.options.templatePopupWrapper;this.$wrapper=S.renderTemplate(e,{}),this.$popupContainer=this.$wrapper.find(".crt-popup-container"),this.$underlay=this.$wrapper.find(".crt-popup-underlay"),k("body").append(this.$wrapper),this.$underlay.click(this.onUnderlayClick.bind(this))};W.prototype.showPopup=function(t){var e=this;this.popup?this.popup.hide(function(){e.popup.destroy(),e.showPopup2(t)}):this.showPopup2(t)},W.prototype.showPopup2=function(t){var e=this;this.popup=new U(this,t,this.widget),this.$popupContainer.append(this.popup.$popup),this.$wrapper.show(),"block"!==this.$underlay.css("display")&&this.$underlay.fadeIn(),this.popup.show(),k("body").addClass("crt-popup-visible"),this.currentPostNum=0;for(var i=0;i<this.posts.length;i++)if(t.id===e.posts[i].id){e.currentPostNum=i,l.log("Found post "+i);break}this.widget.track("popup:show")},W.prototype.setPosts=function(t){this.posts=t},W.prototype.onClose=function(){this.hide()},W.prototype.onPrevious=function(){this.currentPostNum-=1,this.currentPostNum=this.currentPostNum>=0?this.currentPostNum:this.posts.length-1,this.showPopup(this.posts[this.currentPostNum])},W.prototype.onNext=function(){this.currentPostNum+=1,this.currentPostNum=this.currentPostNum<this.posts.length?this.currentPostNum:0,this.showPopup(this.posts[this.currentPostNum])},W.prototype.onUnderlayClick=function(t){l.log("PopupManager->onUnderlayClick"),t.preventDefault(),this.popup&&this.popup.hide(function(){this.hide()}.bind(this))},W.prototype.hide=function(){var t=this;l.log("PopupManager->hide"),this.widget.track("popup:hide"),k("body").removeClass("crt-popup-visible"),this.currentPostNum=0,this.popup=null,this.$underlay.fadeOut(function(){t.$underlay.css({display:"",opacity:""}),t.$wrapper.hide()})},W.prototype.destroy=function(){this.$underlay.remove(),delete this.$popup,delete this.$underlay};var z=function(t){function e(){l.log("Widget->construct"),t.call(this),this.id=r.uId()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(t,e){var i=this;if(this.options=k.extend(!0,{},e,t),!N.checkContainer(this.options.container))return!1;this.$container=k(this.options.container),this.$container.addClass("crt-feed");for(var n=["lang","debug"],o=0,s=n;o<s.length;o+=1){var r=s[o],a=i.$container.data("crt-"+r);a&&(i.options[r]=a)}return this.options.debug&&(l.debug=!0),l.log("Setting language to: "+this.options.lang),P.setLang(this.options.lang),this.createFeed(),this.createFilter(),this.createPopupManager(),!0},e.prototype.createFeed=function(){this.feed=new H(this),this.feed.on(h.POSTS_LOADED,this.onPostsLoaded.bind(this)),this.feed.on(h.POSTS_FAILED,this.onPostsFail.bind(this)),this.feed.on(h.FEED_LOADED,this.onFeedLoaded.bind(this))},e.prototype.createPopupManager=function(){this.popupManager=new W(this)},e.prototype.createFilter=function(){l.log("Widget->createFilter"),l.log(this.options.filter),this.options.filter&&(this.options.filter.showNetworks||this.options.filter.showSources)&&(this.filter=new R(this))},e.prototype.loadPosts=function(t){this.feed.loadPosts(t)},e.prototype.createPostElements=function(t){var e=this,i=[];return k(t).each(function(){var t=e.createPostElement(this);i.push(t.$el)}),i},e.prototype.createPostElement=function(t){var e=new T(t,this.options,this);return e.on(h.POST_CLICK,this.onPostClick.bind(this)),e.on(h.POST_CLICK_READ_MORE,this.onPostClick.bind(this)),e.on(h.POST_IMAGE_LOADED,this.onPostImageLoaded.bind(this)),this.trigger(h.POST_CREATED,e),e},e.prototype.onPostsLoaded=function(t,e){l.log("Widget->onPostsLoaded"),l.log(t),l.log(e)},e.prototype.onPostsFail=function(t,e){l.log("Widget->onPostsLoadedFail"),l.log(t),l.log(e)},e.prototype.onPostClick=function(t,e,i){l.log("Widget->onPostClick"),l.log(t),l.log(i),this.options.showPopupOnClick&&this.popupManager.showPopup(e.json)},e.prototype.onPostImageLoaded=function(t,e){},e.prototype.onFeedLoaded=function(t,e){this.options.hidePoweredBy&&1===e.account.plan.unbranded?this.$container.addClass("crt-feed-unbranded"):this.$container.addClass("crt-feed-branded")},e.prototype.track=function(t){l.log("Feed->track "+t),M.get(this.getUrl("/track/"+this.options.feedId),{a:t},function(t){l.log("Feed->track success"),l.log(t)},function(t,e,i){l.log("Feed->_loadPosts fail"),l.log(e),l.log(i)})},e.prototype.getUrl=function(t){return this.options.apiEndpoint+t},e.prototype._t=function(t){return P.t(t)},e.prototype.destroy=function(){l.log("Widget->destroy"),t.prototype.destroy.call(this),this.feed&&this.feed.destroy(),this.filter&&this.filter.destroy(),this.popupManager&&this.popupManager.destroy(),this.$container.removeClass("crt-feed"),this.$container.removeClass("crt-feed-unbranded"),this.$container.removeClass("crt-feed-branded")},e}(s),V={apiEndpoint:"https://api.curator.io/v1.1",feedId:"",postsPerPage:12,maxPosts:0,templatePost:"post-v2",templatePopup:"popup",templatePopupWrapper:"popup-wrapper",templateFilter:"filter",showPopupOnClick:!0,lang:"en",debug:!1,filter:{showNetworks:!1,networksLabel:"Networks:",showSources:!1,sourcesLabel:"Sources:"}},Z=k.extend({},V,{waterfall:{showLoadMore:!0,continuousScroll:!1,gridWidth:300,animate:!0,animateSpeed:400}}),G=function(t,e){return t=Array.prototype.slice.call(t),e?(e.push.apply(e,t),e):t},q={selector:".item",width:225,gutter:20,animate:!1,animationOptions:{speed:200,duration:300,effect:"fadeInOnAppear",queue:!0,complete:function(){}}},X=function(t,e){l.log("WaterfallLayout->onPostsLoaded"),this.element=k(e),this.id=r.uId(),this.name=this._setName(5),this.gridArr=[],this.gridArrAppend=[],this.gridArrPrepend=[],this.setArr=!1,this.setGrid=!1,this.cols=0,this.itemCount=0,this.isPrepending=!1,this.appendCount=0,this.resetCount=!0,this.ifCallback=!0,this.box=this.element,this.boxWidth=this.box.width(),this.options=k.extend(!0,{},q,t),this.gridArr=G(this.box.find(this.options.selector)),this.isResizing=!1,this.w=0,this.boxArr=[],this._setCols(),this._renderGrid("append"),k(this.box).addClass("gridalicious"),this.createHandlers()};X.prototype.createHandlers=function(){var t=this;l.log("WaterfallLayout->createHandlers"),k(window).on("resize."+this.id,r.debounce(function(){t.resize()},100))},X.prototype.destroyHandlers=function(){l.log("WaterfallLayout->destroyHandlers"),k(window).off("resize."+this.id)},X.prototype._setName=function(t,e){return e=e?e:"",t?this._setName(--t,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+e):e},X.prototype._setCols=function(){var t=this;this.cols=Math.floor(this.box.width()/this.options.width),this.cols<1&&(this.cols=1);var e=(this.box.width()-this.cols*this.options.width-this.options.gutter)/this.cols,i=(this.options.width+e)/this.box.width()*100;this.w=i,this.colHeights=new Array(this.cols),this.colHeights.fill(0),this.colItems=new Array(this.cols),this.colItems.fill([]);for(var n=0;n<this.cols;n++){var o=k("<div></div>").addClass("galcolumn").attr("id","item"+n+t.name).css({width:i+"%",paddingLeft:t.options.gutter,paddingBottom:t.options.gutter,float:"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});t.box.append(o)}},X.prototype._renderGrid=function(t,e,i){var n=this,o=[],s=[],r=this.appendCount,a=this.cols,u=this.name;e?(s=e,"append"===t&&(r+=i),"prepend"===t&&(this.isPrepending=!0),"renderAfterPrepend"===t&&(r+=i)):(s=this.gridArr,r=k(this.gridArr).length);for(var c=0,l=s;c<l.length;c+=1){var h=l[c];h.hasClass("not-responsive"),h.css({zoom:"1",filter:"alpha(opacity=0)",opacity:"0"});for(var p=0,d=1;d<this.colHeights.length;d++)n.colHeights[d]<n.colHeights[p]&&(p=d);"prepend"===t?(k("#item"+p+u).prepend(h),o.push(h)):(k("#item"+p+u).append(h),o.push(h),r>=a&&(r-=a)),n.colItems[p].push(h),n.colHeights[p]+=h.height()}this.appendCount=r,"append"===t||"prepend"===t?("prepend"===t&&this._updateAfterPrepend(this.gridArr,s),this._renderItem(o),this.isPrepending=!1):this._renderItem(this.gridArr)},X.prototype._collectItems=function(){var t=[];return k(this.box).find(this.options.selector).each(function(){t.push(k(this))}),t},X.prototype._renderItem=function(t){var e=this.options.animationOptions.speed,i=this.options.animationOptions.effect,n=this.options.animationOptions.duration,o=this.options.animationOptions.queue,s=this.options.animate,r=this.options.animationOptions.complete,a=0,u=0;s!==!0||this.isResizing?(k.each(t,function(t,e){k(e).css({opacity:"1",filter:"alpha(opacity=100)"})}),this.ifCallback&&r.call(t)):(o===!0&&"fadeInOnAppear"===i?(this.isPrepending&&t.reverse(),k.each(t,function(i,o){window.setTimeout(function(){k(o).animate({opacity:"1.0"},n),++u===t.length&&r.call(void 0,t)},a*e),a++})):o===!1&&"fadeInOnAppear"===i&&(this.isPrepending&&t.reverse(),k.each(t,function(e,i){k(i).animate({opacity:"1.0"},n),++u===t.length&&this.ifCallback&&r.call(void 0,t)})),o!==!0||i||k.each(t,function(e,i){k(i).css({opacity:"1",filter:"alpha(opacity=100)"}),++u===t.length&&this.ifCallback&&r.call(void 0,t)}))},X.prototype._updateAfterPrepend=function(t,e){var i=this.gridArr;k.each(e,function(t,e){i.unshift(e)}),this.gridArr=i},X.prototype.resize=function(){if(this.box.width()!==this.boxWidth){var t=Math.floor(this.box.width()/this.options.width);this.cols!==t&&(this.box.find(k(".galcolumn")).remove(),this._setCols(),this.ifCallback=!1,this.isResizing=!0,this._renderGrid("append"),this.ifCallback=!0,this.isResizing=!1,this.boxWidth=this.box.width())}},X.prototype.append=function(t){var e=this.gridArr,i=this.gridArrPrepend;k.each(t,function(t,n){e.push(n),i.push(n)}),this._renderGrid("append",t,k(t).length)},X.prototype.prepend=function(t){this.ifCallback=!1,this._renderGrid("prepend",t,k(t).length),this.ifCallback=!0},X.prototype.destroy=function(){this.destroyHandlers()};var Y=function(t){function e(e){var i=this;t.call(this),this.init(e,Z)&&(l.log("Waterfall->init with options:"),l.log(this.options),this.$scroll=k('<div class="crt-feed-scroll"></div>').appendTo(this.$container),this.$feed=k('<div class="crt-feed"></div>').appendTo(this.$scroll),this.$container.addClass("crt-feed-container"),this.options.continuousScroll&&k(this.$scroll).scroll(function(){var t=i.$scroll.height(),e=i.$feed.height();i.$scroll.scrollTop()>=e-t&&i.loadMorePosts()}),this.options.waterfall.showLoadMore&&(this.$more=k('<div class="crt-load-more"><a href="#"><span>'+this._t("Load more")+"</span></a></div>").appendTo(this.$scroll),this.$more.find("a").on("click",function(t){t.preventDefault(),i.loadMorePosts()})),this.ui=new X({selector:".crt-post-c",gutter:0,width:this.options.waterfall.gridWidth,animate:this.options.waterfall.animate,animationOptions:{speed:this.options.waterfall.animateSpeed/2,duration:this.options.waterfall.animateSpeed}},this.$feed),this.on(h.FILTER_CHANGED,function(){i.$feed.find(".crt-post").remove()}),this.feed.load())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadMorePosts=function(){l.log("Waterfall->loadMorePosts"),this.feed.loadAfter()},e.prototype.loadPage=function(t){l.log("Waterfall->loadPage"),this.$feed.find(".crt-post").remove(),this.feed.loadPosts(t)},e.prototype.onPostsLoaded=function(t,e){l.log("Waterfall->onPostsLoaded");var i=this.createPostElements(e);this.ui.append(i);var n=this;k.each(i,function(){var t=this;n.options.waterfall.showReadMore&&t.find(".crt-post").addClass("crt-post-show-read-more")}),this.feed.allPostsLoaded&&this.$more&&this.$more.hide(),this.popupManager.setPosts(e),this.loading=!1,this.trigger(h.POSTS_RENDERED,this)},e.prototype.destroy=function(){l.log("Waterfall->destroy"),t.prototype.destroy.call(this),this.feed.destroy(),this.ui.destroy(),this.$feed.remove(),this.$scroll.remove(),this.$more&&this.$more.remove(),this.$container.removeClass("crt-feed-container"),delete this.$feed,delete this.$scroll,delete this.$container,delete this.options,delete this.totalPostsLoaded,delete this.loading,delete this.allLoaded,delete this.feed},e}(z),J=k.extend({},V,{templatePost:"grid-post-v2",templateFeed:"grid-feed-v2",animate:!1,grid:{minWidth:200,rows:3}}),K=function(t){function e(e){if(t.call(this),this.loading=!1,this.feed=null,this.$container=null,this.$feed=null,this.posts=[],this.columnCount=0,this.rowsMax=0,this.totalPostsLoaded=0,this.allLoaded=!1,this.init(e,J)){l.log("Grid->init with options:"),l.log(this.options);var i=S.renderTemplate(this.options.templateFeed,{});this.$container.append(i),this.$feed=this.$container.find(".crt-feed"),this.$feedWindow=this.$container.find(".crt-feed-window"),this.$loadMore=this.$container.find(".crt-feed-more a"),this.$container.addClass("crt-grid"),this.options.grid.showLoadMore?(this.$feedWindow.css({position:"relative"}),this.$loadMore.click(this.onMoreClicked.bind(this))):this.$loadMore.hide(),this.createHandlers(),this.rowsMax=this.options.grid.rows,this.updateLayout()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadPosts=function(){},e.prototype.updateLayout=function(){var t=Math.floor(this.$container.width()/this.options.grid.minWidth);t=t<1?1:t,this.$container.removeClass("crt-grid-col"+this.columnCount),this.columnCount=t,this.$container.addClass("crt-grid-col"+this.columnCount);var e=t*(this.rowsMax+1);if(e>this.feed.postsLoaded&&!this.feed.allPostsLoaded){var i=e-this.feed.postsLoaded,n={limit:i};this.feed.pagination&&this.feed.pagination.after&&(n.after=this.feed.pagination.after),this.feed._loadPosts(n)}else this.updateHeight(!1)},e.prototype.updateHeight=function(t){var e=this.$container.find(".crt-post-c").width();this.$feedWindow.css({overflow:"hidden"});var i=Math.ceil(this.feed.postCount/this.columnCount),n=this.rowsMax<i?this.rowsMax:i;t?this.$feedWindow.animate({height:n*e}):this.$feedWindow.height(n*e),this.options.grid.showLoadMore&&(this.feed.allPostsLoaded?this.$loadMore.hide():this.$loadMore.show())},e.prototype.createHandlers=function(){var t=this,e=this.id,i=r.debounce(function(){t.updateLayout()},100);k(window).on("resize."+e,i),k(window).on("curatorCssLoaded."+e,i),k(document).on("ready."+e,i)},e.prototype.destroyHandlers=function(){var t=this.id;k(window).off("resize."+t),k(window).off("curatorCssLoaded."+t),k(document).off("ready."+t)},e.prototype.onPostsLoaded=function(t,e){var i=this;if(l.log("Grid->onPostsLoaded"),this.loading=!1,0===e.length)this.allLoaded=!0;else{this.postElements=[];for(var n=0,o=0,s=e;o<s.length;o+=1){var r=s[o],a=i.createPostElement(r);i.postElements.push(a),i.$feed.append(a.$el),a.layout(),i.options.animate&&(a.$el.css({opacity:0}),function(t){window.setTimeout(function(){t.$el.css({opacity:0}).animate({opacity:1})},100*n)}(a),n++)}this.popupManager.setPosts(e),this.updateHeight(!0)}},e.prototype.onMoreClicked=function(t){t.preventDefault();var e=1;this.columnCount<=1?e=4:2===this.columnCount&&(e=2),this.rowsMax+=e,this.updateLayout()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.feed.destroy(),this.destroyHandlers(),this.$container.empty().removeClass("crt-grid").removeClass("crt-grid-col"+this.columnCount).css({height:"",overflow:""}),delete this.$feed,delete this.$container,delete this.options,delete this.totalPostsLoaded,delete this.loading,delete this.allLoaded,delete this.feed},e}(z),Q={circular:!1,speed:5e3,duration:700,minWidth:250,panesVisible:null,moveAmount:0,autoPlay:!1,useCss:!0};k.zepto&&(Q.easing="ease-in-out");var tt=function(t){function e(e,i){l.log("LayoutCarousel->construct"),t.call(this),this.id=r.uId(),this.current_position=0,this.animating=!1,this.timeout=null,this.FAKE_NUM=0,this.PANES_VISIBLE=0,this.options=k.extend({},Q,i),this.$viewport=k(e),this.$panes=this.$viewport.children(),this.$panes.detach(),this.$stage=k('<div class="ctr-carousel-stage"></div>').appendTo(this.$viewport),this.$pane_slider=k('<div class="ctr-carousel-slider"></div>').appendTo(this.$stage),this.addControls(),this.createHandlers(),this.update()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createHandlers=function(){var t=this;k(window).on("resize."+this.id,r.debounce(function(){t.updateLayout()},100))},e.prototype.destroyHandlers=function(){k(window).off("resize."+this.id)},e.prototype.update=function(){l.log("LayoutCarousel->update "),this.$panes=this.$pane_slider.children(),this.NUM_PANES=this.options.circular?this.$panes.length+1:this.$panes.length,this.NUM_PANES>0&&(this.resize(),this.move(this.current_position,!0),this.animating||this.options.autoPlay&&this.animate())},e.prototype.add=function(t){l.log("LayoutCarousel->add "+t.length),this.$pane_slider.append(t),this.$panes=this.$pane_slider.children()},e.prototype.resize=function(){var t=this,e=this.options.infinite?100*(this.NUM_PANES+1)+"%":100*this.NUM_PANES+"%";if(this.$pane_slider.css({width:e}),this.VIEWPORT_WIDTH=this.$viewport.width(),this.options.panesVisible?(this.PANES_VISIBLE=this.options.panesVisible(),this.PANE_WIDTH=this.VIEWPORT_WIDTH/this.PANES_VISIBLE):(this.PANES_VISIBLE=this.VIEWPORT_WIDTH<this.options.minWidth?1:Math.floor(this.VIEWPORT_WIDTH/this.options.minWidth),this.PANE_WIDTH=this.VIEWPORT_WIDTH/this.PANES_VISIBLE),this.options.infinite){this.$panes.filter(".crt-clone").remove();for(var i=this.NUM_PANES-1;i>this.NUM_PANES-1-this.PANES_VISIBLE;i--){var n=t.$panes.eq(i).clone();n.addClass("crt-clone"),n.css("opacity","1"),n.find(".crt-post-image").css({opacity:1}),t.$pane_slider.prepend(n),t.FAKE_NUM=t.PANES_VISIBLE}this.$panes=this.$pane_slider.children()}this.$panes.each(function(e,i){k(i).css({width:t.PANE_WIDTH+"px"})})},e.prototype.updateLayout=function(){this.resize(),this.move(this.current_position,!0),this.options.autoPlay&&this.animate()},e.prototype.animate=function(){var t=this;this.animating=!0,window.clearTimeout(this.timeout),this.timeout=window.setTimeout(function(){t.next()},this.options.speed)},e.prototype.next=function(){var t=this.options.moveAmount?this.options.moveAmount:this.PANES_VISIBLE;this.move(this.current_position+t,!1)},e.prototype.prev=function(){var t=this.options.moveAmount?this.options.moveAmount:this.PANES_VISIBLE;this.move(this.current_position-t,!1)},e.prototype.move=function(t,e){l.log("LayoutCarousel->move "+t),this.current_position=t;var i=this.NUM_PANES-this.PANES_VISIBLE;this.current_position<0?this.current_position=0:this.current_position>i&&(this.current_position=i);var n=this.FAKE_NUM+this.current_position,o=n*this.PANE_WIDTH,s=this.options.infinite?this.PANE_WIDTH*this.NUM_PANES:this.PANE_WIDTH*this.NUM_PANES-this.VIEWPORT_WIDTH;this.currentLeft=o,this.currentLeft=o<0?0:o>s?s:o;var r=0-this.currentLeft;if(l.log("LayoutCarousel->move x:"+r),e)this.$pane_slider.css({transform:"translate3d("+r+"px, 0px, 0px)"}),this.moveComplete();else{var a={duration:this.options.duration,complete:this.moveComplete.bind(this)};this.options.easing&&(a.easing=this.options.easing),this.$pane_slider.addClass("crt-animate-transform"),this.$pane_slider.animate({transform:"translate3d("+r+"px, 0px, 0px)"},a)}},e.prototype.moveComplete=function(){var t=this;l.log("LayoutCarousel->moveComplete"),this.options.infinite&&this.current_position>=this.NUM_PANES-this.PANES_VISIBLE&&(this.$pane_slider.css({transform:"translate3d(0px, 0px, 0px)"}),this.current_position=0-this.PANES_VISIBLE,this.currentLeft=0),window.setTimeout(function(){t.updateHeight()},50),this.trigger(h.CAROUSEL_CHANGED,[this,this.current_position]),this.options.autoPlay&&this.animate()},e.prototype.updateHeight=function(){var t=this;l.log("LayoutCarousel->updateHeight");for(var e=0,i=this.options.infinite?this.current_position+this.FAKE_NUM:this.current_position,n=i+this.PANES_VISIBLE,o=i;o<n;o++){var s=k(t.$panes[o]).height();s>e&&(e=s)}this.$stage.height()!==e&&this.$stage.animate({height:e},300)},e.prototype.addControls=function(){this.$viewport.append('<button type="button" data-role="none" class="crt-panel-prev crt-panel-arrow" aria-label="Previous" role="button" aria-disabled="false">Previous</button>'),this.$viewport.append('<button type="button" data-role="none" class="crt-panel-next crt-panel-arrow" aria-label="Next" role="button" aria-disabled="false">Next</button>'),this.$viewport.on("click",".crt-panel-prev",this.prev.bind(this)),this.$viewport.on("click",".crt-panel-next",this.next.bind(this))},e.prototype.destroy=function(){this.destroyHandlers(),window.clearTimeout(this.timeout)},e}(s),et=k.extend({},V,{scroll:"more",carousel:{autoPlay:!0,autoLoad:!0,infinite:!1}}),it=function(t){function e(e){var i=this;t.call(this),e.postsPerPage=30,this.loading=!1,this.posts=[],this.firstLoad=!0,this.init(e,et)&&(l.log("Carousel->init with options:"),l.log(this.options),this.allLoaded=!1,this.$feed=k('<div class="crt-carousel-feed"></div>').appendTo(this.$container),this.$container.addClass("crt-carousel"),this.carousel=new tt(this.$feed,this.options.carousel),this.carousel.on(h.CAROUSEL_CHANGED,this.onCarouselChange.bind(this)),
this.on(h.FILTER_CHANGED,function(){i.$feed.find(".crt-post").remove()}),this.loadPosts(0))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadMorePosts=function(){l.log("Carousel->loadMorePosts"),this.feed.postCount>this.feed.postsLoaded&&this.feed.loadPosts(this.feed.currentPage+1)},e.prototype.onPostsLoaded=function(t,e){if(l.log("Carousel->onPostsLoaded"),this.loading=!1,0===e.length)this.allLoaded=!0;else{var i=this,n=[];k(e).each(function(t){var e=i.createPostElement(this);n.push(e.$el),i.options.animate&&i.firstLoad&&(e.$el.css({opacity:0}),window.setTimeout(function(){e.$el.css({opacity:0}).animate({opacity:1})},100*t))}),this.carousel.add(n),this.carousel.update(),this.popupManager.setPosts(e)}this.firstLoad=!1},e.prototype.onCarouselChange=function(t,e){this.options&&this.options.carousel.autoLoad&&e>=this.feed.postsLoaded-this.carousel.PANES_VISIBLE&&this.loadMorePosts()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.feed.destroy(),this.carousel.off(h.CAROUSEL_CHANGED,this.onCarouselChange.bind(this)),this.carousel.destroy(),this.$feed.remove(),this.$container.removeClass("crt-carousel"),delete this.$feed,delete this.$container,delete this.options,delete this.feed.postsLoaded,delete this.loading,delete this.allLoaded,delete this.feed},e}(z),nt=k.extend({},V,{panel:{autoPlay:!0,autoLoad:!0,moveAmount:1,fixedHeight:!1,infinite:!0,minWidth:2e3}}),ot=function(t){function e(e){t.call(this),this.loading=!1,this.feed=null,this.$container=null,this.$feed=null,this.posts=[],this.init(e,nt)&&(l.log("Panel->init with options:"),l.log(this.options),this.allLoaded=!1,this.$feed=k('<div class="crt-feed"></div>').appendTo(this.$container),this.$container.addClass("crt-carousel"),this.$container.addClass("crt-panel"),this.options.panel.fixedHeight&&this.$container.addClass("crt-panel-fixed-height"),this.carousel=new tt(this.$feed,this.options.panel),this.carousel.on(h.CAROUSEL_CHANGED,this.onCarouselChange.bind(this)),this.loadPosts(0))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadMorePosts=function(){l.log("Panel->loadMorePosts"),this.feed.loadPosts(this.feed.currentPage+1)},e.prototype.onPostsLoaded=function(t,e){if(l.log("Panel->onPostsLoaded"),this.loading=!1,0===e.length)this.allLoaded=!0;else{var i=this,n=[];k(e).each(function(){var t=i.createPostElement(this);n.push(t.$el)}),this.carousel.add(n),this.carousel.update(),this.popupManager.setPosts(e)}},e.prototype.onPostImageLoaded=function(){this.carousel.updateHeight()},e.prototype.onCarouselChange=function(t,e){this.options&&this.options.panel.autoLoad&&e>=this.feed.postsLoaded-4&&this.loadMorePosts()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.feed.destroy(),this.carousel.off(h.CAROUSEL_CHANGED,this.onCarouselChange.bind(this)),this.carousel.destroy(),this.$feed.remove(),this.$container.removeClass("crt-panel"),this.$container.removeClass("crt-carousel"),delete this.$feed,delete this.$container,delete this.options,delete this.feed.postsLoaded,delete this.loading,delete this.allLoaded,delete this.feed},e}(z),st=function(t){return new(0,rt.Widgets[t.type])(t)},rt={loadWidget:st,loadCSS:function(){},z:k,_t:function(t,e,i){return P.t(t,e,i)},Templates:p,Templating:S,EventBus:s,Events:h,Logger:l,Ui:{Post:T},Widgets:{Waterfall:Y,Grid:K,Carousel:it,Panel:ot},Utils:{Html:N,String:a}};return rt});